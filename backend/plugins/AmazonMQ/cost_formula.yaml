service: AmazonMQ
version: "2.0.0"

inputs:
  - name: broker_instance_type
    type: string
    required: true
    default: "mq.t3.micro"
    description: "MQ broker instance type"
  - name: deployment_mode
    type: string
    required: true
    default: "SINGLE_INSTANCE"
    description: "Deployment mode (SINGLE_INSTANCE or ACTIVE_STANDBY_MULTI_AZ)"

calculation_steps:
  - id: broker_cost
    description: "Broker instance cost"
    formula: |
      pricing.brokers[broker_instance_type] * pricing.constants.hours_per_month * (
        2 if deployment_mode == 'ACTIVE_STANDBY_MULTI_AZ' else 1
      )
    output: broker_cost
    pricing_keys:
      - brokers
      - constants.hours_per_month

total_formula: "broker_cost"

assumptions:
  - "Broker pricing varies by instance type and region"
  - "Active/standby deployment doubles broker cost"
  - "Storage included in broker pricing"
  - "Data transfer charges apply separately"

pricing_sources:
  - name: "Amazon MQ Pricing"
    url: "https://aws.amazon.com/amazon-mq/pricing/"
    last_updated: "2024-12-15"
