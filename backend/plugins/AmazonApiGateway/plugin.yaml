service_id: AmazonApiGateway
version: "1.0.0"
category: Networking

metadata:
  service_id: AmazonApiGateway
  display_name: Amazon API Gateway
  description: Fully managed service for creating, publishing, and managing APIs at any scale
  category: Networking
  icon_url: ""
  tags:
    - api
    - rest
    - websocket
    - serverless
    - integration

dependencies:
  mandatory: []
  conditional:
    - service: AWSLambda
      condition: "backend_type == 'lambda'"
      reason: "Lambda integration for API backend"
    - service: AmazonCloudWatch
      condition: "enable_logging == true"
      reason: "CloudWatch for API logging and monitoring"
  implicit:
    - service: AWSDataTransfer
      reason: "Data transfer costs for API requests/responses"

validation_rules:
  - field: requests_per_month
    rule: "requests_per_month > 0"
    message: "API requests must be greater than 0"
    severity: error
    
  - field: api_type
    rule: "api_type in ['REST', 'HTTP', 'WebSocket']"
    message: "API type must be REST, HTTP, or WebSocket"
    severity: error
    
  - field: cache_size_gb
    rule: "cache_size_gb == 0 or cache_size_gb >= 0.5"
    message: "Cache size must be 0 (disabled) or at least 0.5 GB"
    severity: warning
    
  - field: enable_caching
    rule: "not enable_caching or cache_size_gb > 0"
    message: "Caching enabled but cache size is 0"
    severity: warning
