service: AWSQueueService
version: "1.0.0"

inputs:
  - name: queue_type
    type: string
    required: true
    default: "Standard"
    description: "Queue type (Standard or FIFO)"
    
  - name: requests_per_month
    type: integer
    required: true
    default: 1000000
    description: "Number of requests per month"
    
  - name: average_message_size_kb
    type: number
    required: false
    default: 64
    description: "Average message size in KB"

calculation_steps:
  - id: request_cost
    description: "Cost for SQS requests"
    formula: |
      if requests_per_month <= 1000000:
        0
      else:
        if queue_type == 'FIFO':
          (requests_per_month - 1000000) * 0.0000005
        else:
          (requests_per_month - 1000000) * 0.0000004
    output: request_cost
    
  - id: data_transfer_cost
    description: "Data transfer cost"
    formula: |
      data_gb = (requests_per_month * average_message_size_kb) / 1024 / 1024
      data_gb * 0.09
    output: transfer_cost

total_formula: "request_cost + transfer_cost"

assumptions:
  - "First 1 million requests free per month"
  - "Standard queue: $0.40 per million requests after free tier"
  - "FIFO queue: $0.50 per million requests after free tier"
  - "Data transfer: $0.09/GB"
  - "Pricing based on us-east-1"

pricing_sources:
  - name: "Amazon SQS Pricing"
    url: "https://aws.amazon.com/sqs/pricing/"
    last_updated: "2024-01-01"
