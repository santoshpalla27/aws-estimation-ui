service: AmazonOpenSearchService
version: "2.0.0"

inputs:
  - name: instance_type
    type: string
    required: true
    default: "t3.small.search"
    description: "OpenSearch instance type"
  - name: instance_count
    type: integer
    required: true
    default: 2
    description: "Number of instances"
  - name: storage_gb
    type: number
    required: true
    default: 100
    description: "Storage per instance (GB)"

calculation_steps:
  - id: instance_cost
    description: "Instance cost based on type"
    formula: "instance_count * pricing.instances[instance_type] * pricing.constants.hours_per_month"
    output: instance_cost
    pricing_keys:
      - instances
      - constants.hours_per_month
      
  - id: storage_cost
    description: "EBS storage cost"
    formula: "storage_gb * instance_count * pricing.storage.ebs_per_gb_month"
    output: storage_cost
    pricing_keys:
      - storage.ebs_per_gb_month

total_formula: "instance_cost + storage_cost"

assumptions:
  - "Instance pricing varies by type and region"
  - "EBS storage charged per GB-month"
  - "Multi-AZ deployment requires additional instances"
  - "UltraWarm and cold storage not included"

pricing_sources:
  - name: "Amazon OpenSearch Pricing"
    url: "https://aws.amazon.com/opensearch-service/pricing/"
    last_updated: "2024-12-15"
