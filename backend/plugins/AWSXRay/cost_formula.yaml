service: AWSXRay
version: "1.0.0"
inputs:
  - name: traces_recorded_per_month
    type: integer
    required: true
    default: 100000
  - name: traces_retrieved_per_month
    type: integer
    required: true
    default: 10000
calculation_steps:
  - id: record_cost
    description: "Trace recording cost"
    formula: |
      if traces_recorded_per_month <= 100000:
        0
      else:
        (traces_recorded_per_month - 100000) * 0.000005
    output: record_cost
  - id: retrieve_cost
    description: "Trace retrieval cost"
    formula: |
      if traces_retrieved_per_month <= 1000000:
        0
      else:
        (traces_retrieved_per_month - 1000000) * 0.0000005
    output: retrieve_cost
total_formula: "record_cost + retrieve_cost"
assumptions:
  - "First 100,000 traces recorded free"
  - "Recording: $5.00 per million after free tier"
  - "First 1M traces retrieved free"
  - "Retrieval: $0.50 per million after free tier"
pricing_sources:
  - name: "AWS X-Ray Pricing"
    url: "https://aws.amazon.com/xray/pricing/"
    last_updated: "2024-01-01"
