service: CodeBuild
version: "1.0.0"

inputs:
  - name: build_minutes_per_month
    type: number
    required: true
    default: 100
  - name: compute_type
    type: string
    required: true
    default: "general1.small"

calculation_steps:
  - id: build_cost
    description: "Build compute cost"
    formula: |
      if compute_type == 'general1.small':
        build_minutes_per_month * 0.005
      elif compute_type == 'general1.medium':
        build_minutes_per_month * 0.01
      elif compute_type == 'general1.large':
        build_minutes_per_month * 0.02
      else:
        build_minutes_per_month * 0.005
    output: build_cost

total_formula: "build_cost"

assumptions:
  - "general1.small: $0.005/minute"
  - "general1.medium: $0.01/minute"
  - "general1.large: $0.02/minute"
  - "100 build minutes free per month"

pricing_sources:
  - name: "AWS CodeBuild Pricing"
    url: "https://aws.amazon.com/codebuild/pricing/"
    last_updated: "2024-01-01"
