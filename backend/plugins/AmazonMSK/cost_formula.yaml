service: AmazonMSK
version: "2.0.0"

inputs:
  - name: broker_instance_type
    type: string
    required: true
    default: "kafka.t3.small"
    description: "Kafka broker instance type"
  - name: number_of_brokers
    type: integer
    required: true
    default: 3
    description: "Number of broker nodes"
  - name: storage_gb_per_broker
    type: number
    required: true
    default: 100
    description: "Storage per broker (GB)"

calculation_steps:
  - id: broker_cost
    description: "Broker instance cost"
    formula: "number_of_brokers * pricing.brokers[broker_instance_type] * pricing.constants.hours_per_month"
    output: broker_cost
    pricing_keys:
      - brokers
      - constants.hours_per_month
      
  - id: storage_cost
    description: "Broker storage cost"
    formula: "number_of_brokers * storage_gb_per_broker * pricing.storage.per_gb_month"
    output: storage_cost
    pricing_keys:
      - storage.per_gb_month

total_formula: "broker_cost + storage_cost"

assumptions:
  - "Broker pricing varies by instance type and region"
  - "Storage charged per GB-month per broker"
  - "Minimum 3 brokers recommended for production"
  - "Data transfer charges apply separately"

pricing_sources:
  - name: "Amazon MSK Pricing"
    url: "https://aws.amazon.com/msk/pricing/"
    last_updated: "2024-12-15"
