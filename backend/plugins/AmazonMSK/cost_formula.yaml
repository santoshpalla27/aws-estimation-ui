service: AmazonMSK
version: "1.0.0"
inputs:
  - name: broker_instance_type
    type: string
    required: true
    default: "kafka.t3.small"
  - name: number_of_brokers
    type: integer
    required: true
    default: 3
  - name: storage_gb_per_broker
    type: number
    required: true
    default: 100
calculation_steps:
  - id: broker_cost
    description: "Broker instance cost"
    formula: |
      if broker_instance_type == 'kafka.t3.small':
        number_of_brokers * 0.038 * 730
      elif broker_instance_type == 'kafka.m5.large':
        number_of_brokers * 0.21 * 730
      else:
        number_of_brokers * 0.21 * 730
    output: broker_cost
  - id: storage_cost
    description: "Storage cost"
    formula: "number_of_brokers * storage_gb_per_broker * 0.10"
    output: storage_cost
total_formula: "broker_cost + storage_cost"
assumptions:
  - "kafka.t3.small: $0.038/hour"
  - "Storage: $0.10/GB-month"
pricing_sources:
  - name: "Amazon MSK Pricing"
    url: "https://aws.amazon.com/msk/pricing/"
    last_updated: "2024-01-01"
