service_id: AmazonVPC
version: "1.0.0"
metadata:
  service_id: AmazonVPC
  display_name: Amazon VPC
  description: Isolated cloud network for AWS resources
  category: Networking
  icon_url: https://aws.amazon.com/vpc/icon.png
  tags:
    - networking
    - security
    - infrastructure

dependencies:
  conditional:
    - service: NATGateway
      condition: nat_gateway_count > 0
      reason: NAT Gateway for private subnet internet access
      
    - service: VPCEndpoints
      condition: vpc_endpoints_enabled == true
      reason: VPC Endpoints for private AWS service access
      
  implicit:
    - service: DataTransfer_CrossAZ
      condition: multi_az == true
      reason: Cross-AZ data transfer between subnets
      cost_impact:
        driver: cross_az_traffic
        estimated_range: [5, 200]

validation_rules:
  - id: vpc_nat_gateway_ha
    type: warning
    condition: nat_gateway_count == 1 && multi_az == true
    message: "Single NAT Gateway in Multi-AZ setup"
    recommendation: "Deploy NAT Gateway in each AZ for high availability"
    
  - id: vpc_flow_logs
    type: info
    condition: flow_logs_enabled == false
    message: "VPC Flow Logs not enabled"
    recommendation: "Enable Flow Logs for network monitoring and troubleshooting"
