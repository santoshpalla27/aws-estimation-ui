service: AmazonVPC
version: "1.0.0"

inputs:
  - name: nat_gateway_count
    type: integer
    required: true
    description: "Number of NAT Gateways"
    
  - name: nat_data_processed_gb
    type: number
    required: false
    default: 100
    description: "Data processed through NAT Gateway (GB/month)"
    
  - name: vpc_endpoints_count
    type: integer
    required: false
    default: 0
    description: "Number of VPC Endpoints"

calculation_steps:
  - id: nat_gateway_hours
    description: "NAT Gateway hourly cost"
    formula: "nat_gateway_count * 730 * 0.045"  # $0.045/hour
    output: nat_hourly_cost
    
  - id: nat_data_processing
    description: "NAT Gateway data processing cost"
    formula: "nat_data_processed_gb * 0.045"  # $0.045/GB
    output: nat_data_cost
    
  - id: vpc_endpoints_cost
    description: "VPC Endpoints cost"
    formula: "vpc_endpoints_count * 730 * 0.01"  # $0.01/hour per endpoint
    output: endpoints_cost

total_formula: "nat_hourly_cost + nat_data_cost + endpoints_cost"

assumptions:
  - "NAT Gateway pricing: $0.045/hour + $0.045/GB processed"
  - "VPC Endpoints pricing: $0.01/hour per endpoint"
  - "VPC itself has no cost"
  - "Pricing based on us-east-1"

pricing_sources:
  - name: "Amazon VPC Pricing"
    url: "https://aws.amazon.com/vpc/pricing/"
    last_updated: "2024-01-01"
